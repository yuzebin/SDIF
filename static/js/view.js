var view={changeDocInfo:function(C){var B=(/Category/.test(C))?"更改分类":"更改下载分数";var A=(/Category/.test(C))?0:1;pop.show(B,{url:"/static/html/changeDocInfo.html?ct="+A+"&docid="+DOC_INFO.doc_id+"&score="+DOC_INFO.price,width:440,height:270})},download:function(){function A(){pop.hide();document.downloadForm.submit()}var B="<div style='text-align:center'>本次下载将耗费财富值<b>"+DOC_INFO.price+"</b>分，您确定下载么?</div>";B+="<div style='margin-top:24px;text-align:center'><input type='button' id='confirmDownload' class='pop_btn_short' value='确认'>";B+="<input type='button' class='pop_btn_short ml12' value='取消' onclick='pop.hide()'></div>";pop.show("提示",{info:B,width:440,height:270});baidu.on("confirmDownload","click",A)},showHideSummary:function(A){if(A==1){baidu.hide("summary");baidu.show("full-summary")}else{baidu.show("summary");baidu.hide("full-summary")}}};function Rate(ele){var _ele=G(ele),_score,int_score,is_odd;rate_flag=false;var tip=["很差","较差","还行","推荐","力荐","请点击星星选择","谢谢您的评价!","您已评价"];function create(score){_score=parseInt(score);int_score=parseInt(_score/2);is_odd=(_score%2!=0);var html="";if(_score>10){return }var real_score=(is_odd)?int_score+".5":int_score+".0";html+='<span id="rateScore" class="score">'+real_score+"</span>";html+='<span id="rateStar" class="star-list">';for(var j=1;j<=5;j++){html+=item(real_score)}html+="</span>";html+='<span class="rate-tip" id="rateTip"></span>';_ele.innerHTML=html;update(int_score,is_odd);binding()}function update(num,_odd){var obj=baidu.GT("span",G("rateStar"));for(var k=0;k<num;k++){obj[k].className="icon star-big-on"}if(_odd){obj[k].className="icon star-big-half";k++}for(var m=k;m<5;m++){obj[m].className="icon star-big-off"}}function binding(){var stars=baidu.GT("span",G("rateStar"));for(var i=0;i<stars.length;i++){baidu.on(stars[i],"mouseover",(function(num){return function(){if(rate_flag){return false}update(num+1,false);G("rateTip").innerHTML=tip[num]}})(i));baidu.on(stars[i],"click",(function(n){return function(){if(rate_flag){return false}rate_flag=true;send_data(n+1)}})(i))}baidu.on("rateStar","mouseout",function(){if(rate_flag){return false}update(int_score,is_odd);G("rateTip").innerHTML=""})}function send_data(v){var params="ct=20009&doc_id="+DOC_INFO.doc_id+"&value_score="+v;var url="/submit";baidu.ajax.post(url,params,function(xhr){var obj=eval(xhr.responseText);if(obj[0]["status"]=="0"){create(obj[0].value_average);G("rateTip").innerHTML=tip[6];G("rateCount").innerHTML=parseInt(G("rateCount").innerHTML)+1}else{G("rateTip").innerHTML=tip[7];update(int_score,is_odd)}setTimeout(function(){G("rateTip").innerHTML=""},2000)})}function item(score){return'<span title="文档得分:'+score+'分" class="icon star-big-off"></span>'}this.create=create};